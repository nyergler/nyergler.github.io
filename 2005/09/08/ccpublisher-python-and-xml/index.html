<!doctype html><html lang=en><head>
<meta charset=utf-8>
<meta http-equiv=content-language content="en">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="ie=edge">
<title>ccPublisher, Python and XML &#183; Nathan R. Yergler</title>
<meta name=title content="ccPublisher, Python and XML &#183; Nathan R. Yergler">
<meta name=description content>
<link rel=canonical href=https://nyergler.github.io/2005/09/08/ccpublisher-python-and-xml/>
<link type=text/css rel=stylesheet href=/css/schemes/ocean.min.ff17c50528c7a4a8a8bb8ec41272d63eb936ecefb9ccfa6db45cd1f5cd8b1becf8606745f751ee0d322ac80c9cb96e58aa699b38aa44cff9d2a8b3ff4f05a7b5.css integrity="sha512-/xfFBSjHpKiou47EEnLWPrk27O+5zPpttFzR9c2LG+z4YGdF91HuDTIqyAycuW5YqmmbOKpEz/nSqLP/TwWntQ==">
<link type=text/css rel=stylesheet href=/css/compiled/main.min.84c4218572228cacf6182dc59fe08b5e1bcd599bb583bc56976aa0070f4cd8a4ff130ee2313074359bf6dba03b211e8c50df743d84ad551575fd0b9f849ec802.css integrity="sha512-hMQhhXIijKz2GC3Fn+CLXhvNWZu1g7xWl2qgBw9M2KT/Ew7iMTB0NZv226A7IR6MUN90PYStVRV1/QufhJ7IAg==">
<script>function loadPreferredAppearance(){localStorage.preferredAppearance==="dark"||!("preferredAppearance"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}function setPreferredAppearance(a){a=="default"?localStorage.removeItem("preferredAppearance"):localStorage.preferredAppearance=a,loadPreferredAppearance()}loadPreferredAppearance(),window.matchMedia("(prefers-color-scheme: dark)").addListener(loadPreferredAppearance)</script>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png>
<link rel=manifest href=/site.webmanifest>
<meta property="og:title" content="ccPublisher, Python and XML">
<meta property="og:description" content="So two days ago I launched the first Developer Preview of ccPublisher 2 for Linux, promising Windows and Mac OS X builds “within the day.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://nyergler.github.io/2005/09/08/ccpublisher-python-and-xml/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2005-09-08T16:56:35+00:00">
<meta property="article:modified_time" content="2005-09-08T16:56:35+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="ccPublisher, Python and XML">
<meta name=twitter:description content="So two days ago I launched the first Developer Preview of ccPublisher 2 for Linux, promising Windows and Mac OS X builds “within the day.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","articleSection":"Posts","name":"ccPublisher, Python and XML","headline":"ccPublisher, Python and XML","description":"So two days ago I launched the first Developer Preview of ccPublisher 2 for Linux, promising Windows and Mac OS X builds “within the day.","inLanguage":"en","author":{"@type":"Person","name":"Nathan Yergler"},"creator":{"@type":"Person","name":"Nathan Yergler"},"copyrightHolder":"Nathan Yergler","copyrightYear":"2005","dateCreated":"2005-09-08T16:56:35\u002b00:00","datePublished":"2005-09-08T16:56:35\u002b00:00","dateModified":"2005-09-08T16:56:35\u002b00:00","url":"https:\/\/nyergler.github.io\/2005\/09\/08\/ccpublisher-python-and-xml\/","wordCount":"886","keywords":[]}</script>
<meta name=author content="Nathan Yergler">
<link href=https://github.com/nyergler rel=me>
<link href=https://instagram.com/nyergler rel=me>
</head>
<body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 bg-neutral text-neutral-900 sm:px-14 md:px-24 lg:px-32 dark:bg-neutral-800 dark:text-neutral max-w-7xl"><header class="flex justify-between py-6 font-semibold sm:items-center sm:py-10 text-neutral-900 dark:text-neutral">
<div>
<a class="hover:underline hover:underline-primary-500 hover:underline-thickness-bold hover:underline-offset-small" rel=me href=/>Nathan R. Yergler</a>
</div>
<nav>
<ul class="flex flex-col list-none sm:flex-row">
<li class="mb-1 text-right sm:mb-0 sm:mr-7 sm:last:mr-0">
<a class="hover:underline hover:underline-primary-500 hover:underline-thickness-bold hover:underline-offset-small" href=/about/ title="Oh hai.">Bio</a>
</li>
<li class="mb-1 text-right sm:mb-0 sm:mr-7 sm:last:mr-0">
<a class="hover:underline hover:underline-primary-500 hover:underline-thickness-bold hover:underline-offset-small" href=/posts/ title=Posts>Blog</a>
</li>
<li class="mb-1 text-right sm:mb-0 sm:mr-7 sm:last:mr-0">
<a class="hover:underline hover:underline-primary-500 hover:underline-thickness-bold hover:underline-offset-small" href=/prints/ title=Prints>Prints</a>
</li>
</ul>
</nav>
</header>
<main class=flex-grow>
<article class=max-w-prose>
<header>
<ol class="text-sm text-neutral-500 dark:text-neutral-400">
<li class="inline hidden">
<a class="hover:underline hover:underline-neutral-300 dark:underline-neutral-600" href=/>Nathan R. Yergler</a><span class="px-1 text-primary-500">/</span>
</li>
<li class=inline>
<a class="hover:underline hover:underline-neutral-300 dark:underline-neutral-600" href=/posts/>Posts</a><span class="px-1 text-primary-500">/</span>
</li>
<li class="inline hidden">
<a class="hover:underline hover:underline-neutral-300 dark:underline-neutral-600" href=/2005/09/08/ccpublisher-python-and-xml/>ccPublisher, Python and XML</a><span class="px-1 text-primary-500">/</span>
</li>
</ol>
<h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
ccPublisher, Python and XML
</h1>
<div class="mt-8 mb-12 text-base text-neutral-500 dark:text-neutral-400">
<div class="flex flex-row items-center">
<time datetime="2005-09-08 16:56:35 +0000 UTC">8 September 2005</time>
</div>
</div>
</header>
<section class="prose dark:prose-light">
<p>So two days ago I launched the first <a href=http://creativecommons.org/weblog/entry/5606>Developer Preview of ccPublisher 2</a> for Linux, promising Windows and Mac <span class=caps>OS</span> X builds “within the day.” It’s been two days, they’re not uploaded, what’s going on? Funny you should ask. It actually has a lot to do with something else that’s been generating a lot of discussion lately on Python blogs: <span class=caps>XML</span>.</p>
<p><a href=http://dirtsimple.org/>Philip J. Eby</a> , the mastermind behind things like <span class=caps>PEAK</span> and Python Eggs, wrote a <a href=http://dirtsimple.org/2005/08/chandler-begins-recovery-from-xml.html>blog post</a> last month titled <a href=http://dirtsimple.org/2005/08/chandler-begins-recovery-from-xml.html>Chandler Begins Recovery from <span class=caps>XML</span></a> This follows his self-described rant from late last year, <a href=http://dirtsimple.org/2004/12/python-is-not-java.html>Python is not Java</a> where he took developers to task for, among other things, turning to <span class=caps>XML</span> as the solution to all your data and configuration woes. The gist was, it might work for Java, but when mixed with Python it’s nothing but a boat anchor. So how is <a href=http://osafoundation.org>Chandler</a> “recovering” from <span class=caps>XML</span>? By dumping it. Their system for extending Chandler, parcels, previously used an <span class=caps>XML</span> file to define extension points and connections (roughly — I won’t claim really deep knowledge here). The new system, championed by <span class=caps>PJE</span>, uses Python syntax and code — descriptors, registrations, etc — to accomplish the same thing. <span class=caps>PJE</span>’s argument, as I read it, hinges not on the idea that <span class=caps>XML</span> is inherently evil, but rather that using <span class=caps>XML</span> is often a sign of over-engineering. As a believer in <span class=caps>YAGNI</span> (Ya Ain’t Gonna Need It) in software development, I can agree with that.</p>
<p>So what does this have to do with ccPublisher 2, and more importantly the delayed Developer Preview packages? Let me address the two parts of that question in sequence.</p>
<p>First, what does it have to do with ccPublisher 2? A major design goal of ccPublisher 2 is enabling third-party contributions, in the form of extensions and derivative applications. We’re doing this in a number of ways, including basic things like improved documentation. A major tactic, though, is the use of loosely coupled pieces of code that are intentionally ignorant about one another. For example, an <span class=caps>MP3</span> file contains metadata in the form of <span class=caps>ID3</span> tags. The object that wraps the generic file doesn’t know this, but it knows it can say “Hey, all you components — anyone know anything about this here file-thingy?” and an adapter object will respond with everything it knows. So in theory (and in practice, actually — this mostly works already) you can swap out or add objects that respond without major surgery. A huge improvement over the ccPublisher 1 codebase. All these bits of code are tied together by <span class=caps>XML</span> files that describe subscriptions, adapters and interfaces. I chose the <span class=caps>ZCML</span> format, developed as part of the Zope3 project, because I was familiar with it, and because I was reasonably confident I could use code from Zope3 to make my life easier. And it turns out I was right — <span class=caps>ZCML</span> was reasonably easy to separate from Zope3. It’s also made life somewhat easier, and it will let non-coders who need customized metadata fields to add them relatively easily (note that I haven’t actually decided if non-coders will actually need to do this, it’s just the easiest rationalization right now).</p>
<p>So after reading Philip’s rant(s) and background on deprecating <span class=caps>XML</span> configuration files in Chandler, I started thinking about the suitability of <span class=caps>ZCML</span> for the task at hand. <span class=caps>ZCML</span> makes a lot of sense for Zope3 — a big advantage (in my mind) of Zope3 over previous versions is that (in theory) you can take existing classes that model data or behavior and use them in Zope without making them Zope-specific. In that case moving the configuration and registration into external files helps with that goal. ccPublisher doesn’t have that goal or that baggage — anything used in ccPublisher will probably be ccPublisher-ized in some way. I’m not convinced that <span class=caps>ZCML</span> is the wrong choice for ccPublisher, but the talk has had the effect of making me think about it more now than I did earlier.</p>
<p>Now, on to the second question — why the delay. Well, it turns out that <span class=caps>ZCML</span> makes life a bit more difficult when packaging your code. Linux wasn’t a problem — you just use <tt class="docutils literal">distutils</tt> and specify a <tt class="docutils literal"><span class=pre>recursive-include</span></tt> in the <span class=caps>MANIFEST</span>.in. Windows is a different story — we’re using py2exe, which means there are two problems: first, py2exe ignores the <span class=caps>MANIFEST</span>.in when finding modules to include. This makes a certain perverse sense, but it still bites you in the ass. After hacking up a script to include the <span class=caps>ZCML</span> along side the Python byte-code, though, you [I] realize something — the byte code is in a <span class=caps>ZIP</span> file, and your code doesn’t traverse into <span class=caps>ZIP</span> files (ala <a href=http://www.python.org/peps/pep-0302.html><span class=caps>PEP</span> 302</a> ) to retrieve the <span class=caps>ZCML</span> resources properly. Additionally, even though you can set up a dummy tree along side library.zip containing the <span class=caps>ZCML</span>, the Python pathing makes things, well, ugly. Really ugly. Sigh.</p>
<p>So ccPublisher 2 Developer Preview is slightly delayed on Windows while we make some retrofits to the code. The solution I’ve decided on is <a href=http://peak.telecommunity.com/DevCenter/PythonEggs>Python Eggs</a> . Eggs let you package your Python code, make explicit declarations about dependencies and (most importantly for this situation) <a href=http://peak.telecommunity.com/DevCenter/PythonEggs#accessing-package-resources>access non-code resources</a> stored in the package.</p>
<p>So interestly, <span class=caps>PJE</span> appears to have the ability to spark concern as well as solve weird edge-case problems.</p>
</section>
<footer class=pt-8>
<div class="pt-8 article-pagination">
<hr class="border-dotted border-neutral-300 dark:border-neutral-600">
<div class="flex justify-between pt-3">
<span>
<a class=flex href=/2005/09/09/the-media-gets-it-right/>
<span class="mr-3 article-pagination-direction">&larr;</span>
<span class="flex flex-col">
<span class="article-pagination-title mt-[0.1rem] leading-6">
The media gets it right</span>
<span class="mt-[0.1rem] text-xs text-neutral-400 dark:text-neutral-500">
<time datetime="2005-09-09 09:22:19 +0000 UTC">9 September 2005</time>
</span>
</span>
</a>
</span>
<span>
<a class="flex text-right" href=/2005/09/08/its-a-start-2/>
<span class="flex flex-col">
<span class="article-pagination-title mt-[0.1rem] leading-6">It’s a start…</span>
<span class="mt-[0.1rem] text-xs text-neutral-400 dark:text-neutral-500">
<time datetime="2005-09-08 14:58:51 +0000 UTC">8 September 2005</time>
</span>
</span>
<span class="ml-3 article-pagination-direction">&rarr;</span>
</a>
</span>
</div>
</div>
</footer>
</article>
</main><footer class=py-10>
<nav class="pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400">
<ul class="flex flex-col list-none sm:flex-row">
<li class="mb-1 sm:mb-0 sm:mr-7 sm:last:mr-0">
<a class="hover:underline hover:underline-primary-500 hover:underline-thickness-bold hover:underline-offset-small" href=/tags/ title=Tags>Tags</a>
</li>
<li class="mb-1 sm:mb-0 sm:mr-7 sm:last:mr-0">
<a class="hover:underline hover:underline-primary-500 hover:underline-thickness-bold hover:underline-offset-small" href=/categories/ title=Categories>Categories</a>
</li>
</ul>
</nav>
<div class="flex justify-between">
<div>
<p class="text-sm text-neutral-500 dark:text-neutral-400">
&copy;
2022
Nathan Yergler
</p>
</div>
</div>
</footer>
</body>
</html>