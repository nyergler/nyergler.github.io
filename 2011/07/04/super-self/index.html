<!doctype html><html lang=en><head>
<meta charset=utf-8>
<meta http-equiv=content-language content="en">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="ie=edge">
<title>&lt;code>super(self.__class__, self) # end of the line for subclassing&lt;/code> &#183; Nathan R. Yergler</title>
<meta name=title content="<code>super(self.__class__, self) # end of the line for subclassing</code> &#183; Nathan R. Yergler">
<meta name=description content>
<link rel=canonical href=https://nyergler.github.io/2011/07/04/super-self/>
<link type=text/css rel=stylesheet href=/css/schemes/ocean.min.ff17c50528c7a4a8a8bb8ec41272d63eb936ecefb9ccfa6db45cd1f5cd8b1becf8606745f751ee0d322ac80c9cb96e58aa699b38aa44cff9d2a8b3ff4f05a7b5.css integrity="sha512-/xfFBSjHpKiou47EEnLWPrk27O+5zPpttFzR9c2LG+z4YGdF91HuDTIqyAycuW5YqmmbOKpEz/nSqLP/TwWntQ==">
<link type=text/css rel=stylesheet href=/css/compiled/main.min.84c4218572228cacf6182dc59fe08b5e1bcd599bb583bc56976aa0070f4cd8a4ff130ee2313074359bf6dba03b211e8c50df743d84ad551575fd0b9f849ec802.css integrity="sha512-hMQhhXIijKz2GC3Fn+CLXhvNWZu1g7xWl2qgBw9M2KT/Ew7iMTB0NZv226A7IR6MUN90PYStVRV1/QufhJ7IAg==">
<script>function loadPreferredAppearance(){localStorage.preferredAppearance==="dark"||!("preferredAppearance"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}function setPreferredAppearance(a){a=="default"?localStorage.removeItem("preferredAppearance"):localStorage.preferredAppearance=a,loadPreferredAppearance()}loadPreferredAppearance(),window.matchMedia("(prefers-color-scheme: dark)").addListener(loadPreferredAppearance)</script>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png>
<link rel=manifest href=/site.webmanifest>
<meta property="og:title" content="<code>super(self.__class__, self) # end of the line for subclassing</code>">
<meta property="og:description" content="I’ve learned (and remembered) a lot in the past two months as I’ve gotten back to coding as my primary job.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://nyergler.github.io/2011/07/04/super-self/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2011-07-04T20:44:23+00:00">
<meta property="article:modified_time" content="2011-07-04T20:44:23+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="<code>super(self.__class__, self) # end of the line for subclassing</code>">
<meta name=twitter:description content="I’ve learned (and remembered) a lot in the past two months as I’ve gotten back to coding as my primary job.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","articleSection":"Posts","name":"\u003ccode\u003esuper(self.__class__, self) # end of the line for subclassing\u003c\/code\u003e","headline":"\u003ccode\u003esuper(self.__class__, self) # end of the line for subclassing\u003c\/code\u003e","description":"I’ve learned (and remembered) a lot in the past two months as I’ve gotten back to coding as my primary job.","inLanguage":"en","author":{"@type":"Person","name":"Nathan Yergler"},"creator":{"@type":"Person","name":"Nathan Yergler"},"copyrightHolder":"Nathan Yergler","copyrightYear":"2011","dateCreated":"2011-07-04T20:44:23\u002b00:00","datePublished":"2011-07-04T20:44:23\u002b00:00","dateModified":"2011-07-04T20:44:23\u002b00:00","url":"https:\/\/nyergler.github.io\/2011\/07\/04\/super-self\/","wordCount":"286","keywords":["python","super"]}</script>
<meta name=author content="Nathan Yergler">
<link href=https://github.com/nyergler rel=me>
<link href=https://instagram.com/nyergler rel=me>
</head>
<body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 bg-neutral text-neutral-900 sm:px-14 md:px-24 lg:px-32 dark:bg-neutral-800 dark:text-neutral max-w-7xl"><header class="flex justify-between py-6 font-semibold sm:items-center sm:py-10 text-neutral-900 dark:text-neutral">
<div>
<a class="hover:underline hover:underline-primary-500 hover:underline-thickness-bold hover:underline-offset-small" rel=me href=/>Nathan R. Yergler</a>
</div>
<nav>
<ul class="flex flex-col list-none sm:flex-row">
<li class="mb-1 text-right sm:mb-0 sm:mr-7 sm:last:mr-0">
<a class="hover:underline hover:underline-primary-500 hover:underline-thickness-bold hover:underline-offset-small" href=/about/ title="Oh hai.">Bio</a>
</li>
<li class="mb-1 text-right sm:mb-0 sm:mr-7 sm:last:mr-0">
<a class="hover:underline hover:underline-primary-500 hover:underline-thickness-bold hover:underline-offset-small" href=/posts/ title=Posts>Blog</a>
</li>
<li class="mb-1 text-right sm:mb-0 sm:mr-7 sm:last:mr-0">
<a class="hover:underline hover:underline-primary-500 hover:underline-thickness-bold hover:underline-offset-small" href=/prints/ title=Prints>Prints</a>
</li>
</ul>
</nav>
</header>
<main class=flex-grow>
<article class=max-w-prose>
<header>
<ol class="text-sm text-neutral-500 dark:text-neutral-400">
<li class="inline hidden">
<a class="hover:underline hover:underline-neutral-300 dark:underline-neutral-600" href=/>Nathan R. Yergler</a><span class="px-1 text-primary-500">/</span>
</li>
<li class=inline>
<a class="hover:underline hover:underline-neutral-300 dark:underline-neutral-600" href=/posts/>Posts</a><span class="px-1 text-primary-500">/</span>
</li>
<li class="inline hidden">
<a class="hover:underline hover:underline-neutral-300 dark:underline-neutral-600" href=/2011/07/04/super-self/>&lt;code>super(self.__class__, self) # end of the line for subclassing&lt;/code></a><span class="px-1 text-primary-500">/</span>
</li>
</ol>
<h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
<code>super(self.__class__, self) # end of the line for subclassing</code>
</h1>
<div class="mt-8 mb-12 text-base text-neutral-500 dark:text-neutral-400">
<div class="flex flex-row items-center">
<time datetime="2011-07-04 20:44:23 +0000 UTC">4 July 2011</time>
</div>
</div>
</header>
<section class="prose dark:prose-light">
<p>I’ve learned (and remembered) a lot in the past two months as I’ve gotten back to coding as my primary job. One thing that I guess I never quite internalized before is how <tt class="docutils literal">super</tt> works. I have been bitten by code that looks something like the following a few times in the past month:</p>
<pre class=literal-block>class A(object):
    def init(self):
        super(self.__class__, self).init()

    class B(A):
    def init(self):
        super(B, self).init()
</pre> The surprise comes when I try to use my sub-class,
<p><tt class="docutils literal">B</tt>. Instantiating <tt class="docutils literal">B()</tt> blows up the stack with: <tt class="docutils literal">RuntimeError: maximum recursion depth exceeded while calling a Python object</tt>. What? According to the <a href=http://docs.python.org/library/functions.html#super>Python 2.7.2 standard library documentation</a> , <tt class="docutils literal">super</tt> “return[s] a proxy object that delegates method calls to a parent or sibling class of type.” So in the case of single inheritance, it delegates access to the super class, it does not return an instance of the super class. In the example above, this means that when you instantiate B, the follow happens:</p>
<ol class="arabic simple">
<li>
enter <tt class="docutils literal">B.__init__()</tt>
</li>
<li>
call <tt class="docutils literal">super</tt> on B and call <tt class="docutils literal">__init__</tt> on the proxy object
</li>
<li>
enter <tt class="docutils literal">A.__init__()</tt>
</li>
<li>
call <tt class="docutils literal">super</tt> on <tt class="docutils literal">self.__class__</tt> and call <tt class="docutils literal">__init__</tt> on the proxy object
</li>
</ol> The problem is that when we get to step four,
<p><tt class="docutils literal">self</tt> still refers to our instance of <tt class="docutils literal">B</tt>, so calling <tt class="docutils literal">super</tt> points back to <tt class="docutils literal">A</tt> again. In technical terms: Ka-bloom. <strong><span class=caps>TL</span>;<span class=caps>DR</span>:</strong> <tt class="docutils literal">super(self.<strong>class</strong>, self)</tt> may look like a neat trick, but it’s the end of the line for sub-classing. <strong>Further reading:</strong> Raymond Hettinger’s excellent <a href=http://rhettinger.wordpress.com/2011/05/26/super-considered-super/>blog post on super</a> provides a great overview of <tt class="docutils literal">super</tt> and shows off the improved Python 3 syntax, which removes the need to write the class name as part of the <tt class="docutils literal">super</tt> statement. I was really pleased to find the Python standard library documentation links directly to it.</p>
</section>
<footer class=pt-8>
<div class="pt-8 article-pagination">
<hr class="border-dotted border-neutral-300 dark:border-neutral-600">
<div class="flex justify-between pt-3">
<span>
<a class=flex href=/2011/09/26/getelget-update/>
<span class="mr-3 article-pagination-direction">&larr;</span>
<span class="flex flex-col">
<span class="article-pagination-title mt-[0.1rem] leading-6">
Updating el-get and getelget.el</span>
<span class="mt-[0.1rem] text-xs text-neutral-400 dark:text-neutral-500">
<time datetime="2011-09-26 09:59:24 +0000 UTC">26 September 2011</time>
</span>
</span>
</a>
</span>
<span>
<a class="flex text-right" href=/2011/04/24/debugging-my-creative-process/>
<span class="flex flex-col">
<span class="article-pagination-title mt-[0.1rem] leading-6">Debugging my Creative Process</span>
<span class="mt-[0.1rem] text-xs text-neutral-400 dark:text-neutral-500">
<time datetime="2011-04-24 10:22:00 +0000 UTC">24 April 2011</time>
</span>
</span>
<span class="ml-3 article-pagination-direction">&rarr;</span>
</a>
</span>
</div>
</div>
</footer>
</article>
</main><footer class=py-10>
<nav class="pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400">
<ul class="flex flex-col list-none sm:flex-row">
<li class="mb-1 sm:mb-0 sm:mr-7 sm:last:mr-0">
<a class="hover:underline hover:underline-primary-500 hover:underline-thickness-bold hover:underline-offset-small" href=/tags/ title=Tags>Tags</a>
</li>
<li class="mb-1 sm:mb-0 sm:mr-7 sm:last:mr-0">
<a class="hover:underline hover:underline-primary-500 hover:underline-thickness-bold hover:underline-offset-small" href=/categories/ title=Categories>Categories</a>
</li>
</ul>
</nav>
<div class="flex justify-between">
<div>
<p class="text-sm text-neutral-500 dark:text-neutral-400">
&copy;
2022
Nathan Yergler
</p>
</div>
</div>
</footer>
</body>
</html>